# LeetCode 第二十二题 括号生成
> 给出 n 代表生成括号的对数，请你写出一个函数，使其能够生成所有可能的并且有效的括号组合。  
> 例如，给出 n = 3，生成结果为：  
> [  
>   "((()))",  
>   "(()())",  
>   "(())()",  
>   "()(())",  
>   "()()()"  
> ]  

# 方法一
使用暴力的方法，将所有的括号组合都列举出来，再判断是否符合括号生成的规则。  
这里我们使用了一个递归函数，函数首先判断当前生成括号长度是否达到`n*2`，如果长度满足要求，判断其是否符合括号生成规则，如果符合，将其加入，否则舍弃  
如果长度没有达到n*2，添加‘（’和‘）’，递归代码。  
在判断其是否符合括号生成规则时，使用一个balance因子，如果是‘（’,balanle自增，如果是‘）’,balance自减，需要注意的是，balance如果小于零，直接返回false，这是因为避免了防止类似于“）（”这种情况  
## Java
```
	public List<String> generateParenthesis(int n) {
		List<String> result = new ArrayList<>();
		generateAll(new char[n * 2], 0, result);
		return result;
	}

	public void generateAll(char[] current, int pos, List<String> result) {
		if (pos == current.length) {
			if (valid(current)) {
				result.add(new String(current));
			}
		} else {
			current[pos] = '(';
			generateAll(current, pos + 1, result);
			current[pos] = ')';
			generateAll(current, pos + 1, result);
		}
	}

	public boolean valid(char[] current) {
		int balance = 0;
		for (char c : current) {
			if (c == '(') {
				balance++;
			} else {
				balance--;
			}
			if (balance < 0)
				return false;/// 防止类似于“）（”这种情况
		}
		return (balance == 0);
	}

```
## C++
### 小问题
在将Java代码转换到C++过程中，遇到了这样一个问题：char current[]字符串数组在Java中可以直接求出其长度，而在c++中，我们只能使用sizeof()函数或者strlen()函数求其长度。  
sizeof()可以求其长度，但当我们将char current[]传入到`void generateAll(char current[],int pos,vector<string>& result)`时，此时的current就变成一个指针了，使用sizeof()得到的长度始终为4。  
strlen()求其长度，strlen()得到的是从第一个字符到'\0'直接的长度，如果字符串中本来就有'\0'，那么我们得到的长度就是错误。  
### 解决办法
使用strlen()求其长度，在char current[]初始化时，为其添加一些字符，如下所示：  
```
for(int i=0; i<n*2; i++)
  current[i]='*';
  current[n*2]='\0';
```
这样以来，成功的解决了问题，当然，如果你有更好的方法，也可以互相交流。  
下面是C++完整代码。
```
class Solution
{
public:
    vector<string> generateParenthesis(int n)
    {
        vector<string> result = vector<string>();
        char current[n*2+1];
        for(int i=0; i<n*2; i++)
            current[i]='*';
        current[n*2]='\0';
        generateAll(current,0,result);
        return result;
    }
    void generateAll(char current[],int pos,vector<string>& result)
    {
        if(strlen(current)==pos)
        {
            if(valid(current))
            {
                result.push_back(current);
            }
        }
        else
        {
            current[pos]='(';
            generateAll(current,pos+1,result);
            current[pos]=')';
            generateAll(current,pos+1,result);
        }
    }
    bool valid(char current[])
    {
        int balance=0;
        for(int i=0; i<strlen(current); i++)
        {
            if(current[i]=='(')
                balance++;
            else
                balance--;
            if(balance<0)
                return false;
        }
        return (balance==0);
    }
};
```
